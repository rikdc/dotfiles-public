- defaults:
    link:
      relink: true
      create: true

- clean: ["~"]

- create:
    - ~/.vim/undo-history
    - ~/.config
    - ~/.config/fish
    - ~/.claude
    - ~/.ssh/sockets

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  -
    command: ./config/macos/setup-homebrew.sh
    description: Installing Homebrew and Essential Packages
    stdout: true
  -
    command: ./config/macos/macos-defaults.sh
    description: Setup MacOS Defaults
    stdout: true
  -
    command: |
      if ! grep -q "$(which fish)" /etc/shells 2>/dev/null; then
        echo "$(which fish)" | sudo tee -a /etc/shells
      fi
    description: Register Fish in /etc/shells
    stdin: true
    stdout: true
  -
    command: |
      if [ "$(basename "$SHELL")" != "fish" ]; then
        chsh -s "$(which fish)"
      fi
    description: Set Fish as default shell
    stdin: true
    stdout: true

- link:
    ~/.gitconfig: config/git/git
    ~/.gitignore_global: config/git/gitignore_global
    ~/.config/starship.toml: config/starship.toml
    ~/.config/fish:
      path: config/fish
      force: true
    ~/.ssh/config: config/ssh/config
    ~/Library/Application Support/Code/User:
      glob: true
      path: config/vscode/*.json
      force: true
    ~/.claude/settings.json: claude/settings.json
    ~/.claude/commands: .claude/commands
